import os
import shutil

root = "D:/PROJECTS/assetsally"
dirs_to_clean = []

for dirpath, dirnames, filenames in os.walk(root):
    if "node_modules" in dirnames:
        full_path = os.path.join(dirpath, "node_modules")
        dirs_to_clean.append(full_path)

print(f"Found {len(dirs_to_clean)} node_modules directories.")

for d in dirs_to_clean:
    print(f"Removing {d}...")
    try:
        shutil.rmtree(d)
    except Exception as e:
        print(f"Error removing {d}: {e}")
        # Try with system command if shutil fails (sometimes happens on Windows with long paths)
        os.system(f'rmdir /s /q "{d}"')

print("Cleanup complete.")
